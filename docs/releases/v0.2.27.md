# VAOL v0.2.27 â€” Merkle Snapshot Restore Hardening

## Summary

`v0.2.27` adds conservative Merkle snapshot restore with deterministic tail replay and fallback semantics for large-ledger startup performance.

## Added

1. Optional persisted Merkle snapshot interfaces:
   1. `store.StoredMerkleSnapshot`
   2. `store.MerkleSnapshotStore`
2. Snapshot encoding/decoding utilities in `pkg/merkle/snapshot.go`.
3. PostgreSQL snapshot persistence (`merkle_snapshots` table with compressed payload storage).
4. Startup restore path:
   1. prefer latest valid snapshot
   2. replay `merkle_leaves` tail
   3. deterministic fallback to existing restore paths on mismatch/corruption.
5. New server runtime flags:
   1. `--merkle-snapshot-enabled`
   2. `--merkle-snapshot-interval`
6. Snapshot restore tests and benchmark coverage.

## Backward Compatibility

1. No REST schema changes.
2. No protobuf/gRPC method or message changes.
3. Snapshot mode is opt-in (`false` by default).

## Operational Notes

1. For very large ledgers, enable snapshots with interval aligned to checkpoint cadence.
2. Startup integrity validation behavior remains unchanged and fail-closed compatible.
